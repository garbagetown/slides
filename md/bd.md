# バグが減らないのはどう考えても設計書が悪い!

2016-03-24<br/>
DTS Developer's Meetup #10

---

## 自己紹介
- 梅澤 雄一郎
- 産業公共事業本部産業事業部
  - オムニチャネル案件ビッグデータ担当
  - ITA-s (内定)
- 業務外
  - Play Framework ドキュメント翻訳 (協力者募集中!)
  - WEB+DB PRESS vol.71 寄稿
  - Developer's Summit 2013 登壇

---

## 事実

以下、自身の経験に基づいた事実。

- 設計書に関連する同じ問題がくり返し発生する
  - 設計書が分かりにくい
    - バグの原因
    - バグ/問い合わせ対応のコストが高い
  - 設計書が保守されない
    - デグレードの原因
    - バグ/問い合わせ対応のコストが高い

---

## 仮説

以下、問題発生する原因について考察する。
 
### 設計書が分かりにくい
- なぜ？
  - 正しい仕様が分からない
  - なぜ？
    - ソースコードは故障/問い合わせ内容の通りに実装され、振舞っている
    - 設計書を読んでも、仕様/実装のいずれが誤りなのか判断できない
    - なぜ？
      - "なにをする" は書かれているが、"なぜそうする" が書かれていない
      - 設計背景/意図が不明なので設計内容の妥当性を検証できない
      - なぜ？
        - 設計書には作り方を記述し、設計背景/意図は要件定義書に書くという意見がある
        - 要件定義書に記述するにはシステム寄り過ぎる設計背景/意図はどこに書くべきか不明
        - **設計書に記述すべき内容を正しく把握できていない**

### 設計書が保守されない
- なぜ？
  - 保守コストが高い
  - なぜ？
    - 障害対応時に実装の修正を優先してしまう
    - 複数個所を整合して修正しなければならない
    - なぜ？
      - 本質的に同じ内容を複数のドキュメントに異なる書き方で記述している
      - なぜ？
        - 個別の設計書と一覧がそれぞれ存在する
        - 基本/詳細設計書、および実装に同じ内容を記述している
        - **設計書に記述すべき内容を正しく把握できていない**

---

## 検証 (検討)

以下、基本設計書について改善案を検討する。詳細設計書については今回の検討結果を踏まえ、別の機会に検討する。

### 設計書が分かりにくい

- 基本設計書は何のために作成する？
  - V 字開発モデルを参考にすると、後続工程、担当者は下記の通り
    - 入力
      - 要件定義 (顧客)
    - 出力
      - 詳細設計 (オフショア開発者)
      - 受入試験 (テスター)
  - これらの担当者が内容を理解し、責務を果たす必要がある
    - 顧客
      - システム詳細に関する専門的な記述は理解できない
      - 要件定義と齟齬がないことを検証する
    - オフショア開発者
      - 難解な日本語は理解できない
      - 基本設計の内容を理解し、詳細設計書を作成する
    - テスター
      - 抜け漏れない試験項目書を作成し、不具合を検出する
  - 業務的な用語、かつ平易な日本語で簡潔に記述する
  - 複雑な業務用件は、図表を用いて抜け漏れなく表現する
- 基本設計書には何を書く？
  - つづきはあとで


### 設計書が保守されない

- つづきはあとで


---

## 結論

- つづきはあとで